/*!
* Pikaday
*
* Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
* MAV: Changes made to "show" and "hide" to affect the wrapper html aswell.
* MAV: adjustPosition rewritten
*/
function adjustElementToOtherElement(n,t){var i,e,f,c,l,o,u,r,s,h=0;if(n.style.position="absolute",i=t,e=n.offsetWidth,f=n.offsetHeight,c=window.innerWidth||document.documentElement.clientWidth,l=window.innerHeight||document.documentElement.clientHeight,o=window.pageYOffset||i.scrollTop,typeof document.getElementsByClassName("floating-actionbar")[0]!="undefined"&&(h=document.getElementsByClassName("floating-actionbar")[0].offsetHeight),typeof i.getBoundingClientRect=="function")s=i.getBoundingClientRect(),u=s.left,r=s.bottom+o;else for(u=i.offsetLeft,r=i.offsetTop+i.offsetHeight;i!=null;)u+=i.offsetLeft,r+=i.offsetTop,i=i.parent;u+e>c&&(u=u-e+t.offsetWidth);r+f+h>l+o&&r-f-t.offsetHeight-h>0&&(r=r-f-t.offsetHeight);n.style.left=u+"px";n.style.top=r+"px"}function pikaTrim(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function pikaHasClass(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")!==-1}function pikaRemoveClass(n,t){n.className=pikaTrim((" "+n.className+" ").replace(" "+t+" "," "))}function pikaAddClass(n,t){pikaHasClass(n,t)||(n.className=n.className===""?t:n.className+" "+t)}function hideIfClickOutsideMyBounds(n,t){t=t||window.event;var i=t.target||t.srcElement,r=i;if(i){!hasEventListeners&&pikaHasClass(i,"pika-select")&&(i.onchange||(i.setAttribute("onchange","return;"),addEvent(i,"change",n._onChange)));do if(pikaHasClass(r,"pika-wrapper")||r===opts.trigger||pikaHasClass(r,"pika-button"))return;while(r=r.parentNode);n._v&&i!==opts.trigger&&r!==opts.trigger&&n.hide()}}function fixPikaWrapperPositionInDOM(){var t=document.getElementById("pika-wrapper"),n,i;if(t){for(n=t.parentNode;n!==null&&n.tagName!=="BODY";)n=n.parentNode;n!=null&&(n.appendChild(t),i=document.getElementById("pika-wrapper-time"),n.appendChild(i))}}function DWClearDate(n){var t=Dynamicweb.UIControls.DatePicker.get_current();t.ClearDate(n)}function SetupCalendarOnfocus(n,t,i,r,u,f,e,o,s,h){var c=Dynamicweb.UIControls.DatePicker.get_current(),v,y,a;c.defaultDates[n]=u;c.names.push(n);typeof c.dict[n]=="undefined"&&(v=c.initPickaday(n,t,i,r,f,e,o,s,h),c.dict[n]=v);n==="ValidFrom_Editor"&&(y=c.dict.ValidFrom_Editor,console.log(y.getDate()));var w=document.getElementById("pika-time-currentName"),l=document.getElementById(n+"_calendar_btn"),p=document.getElementById(n+"_label");h!==!0?l.onclick=p.onclick=function(t){var f=document.getElementById("pika-wrapper-time"),i,u,r;for(pikaAddClass(f,"is-hidden"),w.value="",i=0;i<c.names.length;i++)u=c.names[i],r=c.dict[u],typeof r!="undefined"&&r.hide();c.SetupCalendarHead(c.dict[n]);c.dict[n].show();t.stopPropagation();t.preventDefault()}:(l.classList.add("disabled"),p.classList.add("disabled"));a=document.getElementById(n+"_calendar_time_btn");a!==null&&(h!==!0?a.onclick=function(t){for(var u,s,r,i=0;i<c.names.length;i++)c.dict[c.names[i]].hide();u=document.getElementById("pika-wrapper-time");pikaRemoveClass(u,"is-hidden");var o=document.getElementById("pika-time-currentName"),f=document.getElementById("pika-hour"),e=document.getElementById("pika-minute");adjustElementToOtherElement(u,this);s=c.dict[n];o.value=n;r=c.GetDate(n);r===null?(f.value=0,e.value=0):(f.value=r.getHours(),e.value=r.getMinutes());t.stopPropagation()}:l.classList.add("disabled"))}if(function(n,t){"use strict";n.Pikaday=t()}(undefined,function(){"use strict";var f=!1,s=!!window.addEventListener,t=window.document,h=window.setTimeout,r=function(n,t,i,r){s?n.addEventListener(t,i,!!r):n.attachEvent("on"+t,i)},u=function(n,t,i,r){s?n.removeEventListener(t,i,!!r):n.detachEvent("on"+t,i)},v=function(n,i,r){var u;t.createEvent?(u=t.createEvent("HTMLEvents"),u.initEvent(i,!0,!1),u=e(u,r),n.dispatchEvent(u)):t.createEventObject&&(u=t.createEventObject(),u=e(u,r),n.fireEvent("on"+i,u))},g=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},n=function(n,t){return(" "+n.className+" ").indexOf(" "+t+" ")!==-1},c=function(t,i){n(t,i)||(t.className=t.className===""?i:t.className+" "+i)},y=function(n,t){n.className=g((" "+n.className+" ").replace(" "+t+" "," "))},l=function(n){return/Array/.test(Object.prototype.toString.call(n))},i=function(n){return/Date/.test(Object.prototype.toString.call(n))&&!isNaN(n.getTime())},nt=function(n){var t=n.getDay();return t===0||t===6},tt=function(n){return n%4==0&&n%100!=0||n%400==0},p=function(n,t){return[31,tt(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},a=function(n){i(n)&&n.setHours(0,0,0,0)},o=function(n,t){return n.getTime()===t.getTime()},e=function e(n,t,r){var u,f;for(u in t)f=n[u]!==undefined,f&&typeof t[u]=="object"&&t[u]!==null&&t[u].nodeName===undefined?i(t[u])?r&&(n[u]=new Date(t[u].getTime())):l(t[u])?r&&(n[u]=t[u].slice(0)):n[u]=e({},t[u],r):(r||!f)&&(n[u]=t[u]);return n},w=function(n){return n.month<0&&(n.year-=Math.ceil(Math.abs(n.month)/12),n.month+=12),n.month>11&&(n.year+=Math.floor(Math.abs(n.month)/12),n.month-=12),n},b={field:null,bound:undefined,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},k=function(n,t,i){for(t+=n.firstDay;t>=7;)t-=7;return i?n.i18n.weekdaysShort[t]:n.i18n.weekdays[t]},it=function(n){var t=[];if(n.isEmpty)if(n.showDaysInNextAndPreviousMonths)t.push("is-outside-current-month");else return'<td class="is-empty"><\/td>';return n.isDisabled&&t.push("is-disabled"),n.isToday&&t.push("is-today"),n.isSelected&&t.push("is-selected"),n.isInRange&&t.push("is-inrange"),n.isStartRange&&t.push("is-startrange"),n.isEndRange&&t.push("is-endrange"),'<td data-day="'+n.day+'" class="'+t.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+n.year+'" data-pika-month="'+n.month+'" data-pika-day="'+n.day+'">'+n.day+"<\/button><\/td>"},rt=function(n,t,i){var r=new Date(i,0,1),u=Math.ceil(((new Date(i,t,n)-r)/864e5+r.getDay()+1)/7);return'<td class="pika-week">'+u+"<\/td>"},ut=function(n,t){return"<tr>"+(t?n.reverse():n).join("")+"<\/tr>"},ft=function(n){return"<tbody>"+n.join("")+"<\/tbody>"},et=function(n){var t,i=[];for(n.showWeekNumber&&i.push("<th><\/th>"),t=0;t<7;t++)i.push('<th scope="col"><abbr title="'+k(n,t)+'">'+k(n,t,!0)+"<\/abbr><\/th>");return"<thead><tr>"+(n.isRTL?i.reverse():i).join("")+"<\/tr><\/thead>"},ot=function(n,t,i,r,u){for(var c,f=n._o,y=i===f.minYear,p=i===f.maxYear,s='<div class="pika-title">',a,v,w=!0,h=!0,o=[],e=0;e<12;e++)o.push('<option value="'+(i===u?e-t:12+e-t)+'"'+(e===r?' selected="selected"':"")+(y&&e<f.minMonth||p&&e>f.maxMonth?'disabled="disabled"':"")+">"+f.i18n.months[e]+"<\/option>");for(a='<div class="pika-label">'+f.i18n.months[r]+'<select class="pika-select pika-select-month" tabindex="-1">'+o.join("")+"<\/select><\/div>",l(f.yearRange)?(e=f.yearRange[0],c=f.yearRange[1]+1):(e=i-f.yearRange,c=1+i+f.yearRange),o=[];e<c&&e<=f.maxYear;e++)e>=f.minYear&&o.push('<option value="'+e+'"'+(e===i?' selected="selected"':"")+">"+e+"<\/option>");return v='<div class="pika-label">'+i+f.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+o.join("")+"<\/select><\/div>",s+=f.showMonthAfterYear?v+a:a+v,y&&(r===0||f.minMonth>=r)&&(w=!1),p&&(r===11||f.maxMonth<=r)&&(h=!1),t===0&&(s+='<button class="pika-prev'+(w?"":" is-disabled")+'" type="button"'+(h?"":" disabled")+">"+f.i18n.previousMonth+"<\/button>"),t===n._o.numberOfMonths-1&&(s+='<button class="pika-next'+(h?"":" is-disabled")+'" type="button"'+(h?"":" disabled")+">"+f.i18n.nextMonth+"<\/button>"),s+"<\/div>"},st=function(n,t){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+et(n)+ft(t)+"<\/table>"},d=function(u){var e=this,o=e.config(u),c;e._onMouseDown=function(t){if(e._v){t=t||window.event;var i=t.target||t.srcElement;if(i)if(n(i,"is-disabled")||n(i.parentNode,"is-disabled")||(n(i,"pika-button")&&!n(i,"is-empty")?(e.setDate(new Date(i.getAttribute("data-pika-year"),i.getAttribute("data-pika-month"),i.getAttribute("data-pika-day"))),h(function(){e.hide()},100)):n(i,"pika-prev")?e.prevMonth():n(i,"pika-next")&&e.nextMonth()),n(i,"pika-select")||n(i,"pika-wrapper"))e._c=!0;else if(t.preventDefault)t.preventDefault();else return t.returnValue=!1,!1}};e._onChange=function(t){t=t||window.event;var i=t.target||t.srcElement;i&&(n(i,"pika-select-month")?e.gotoMonth(i.value):n(i,"pika-select-year")&&e.gotoYear(i.value))};e._onInputChange=function(n){var t;n.firedBy!==e&&(f?(t=moment(o.field.value,o.format,o.formatStrict),t=t&&t.isValid()?t.toDate():null):t=new Date(Date.parse(o.field.value)),i(t)&&e.setDate(t),e._v||e.show())};u.disabled||(e._onInputFocus=function(){e.show()},e._onInputClick=function(){e.show()});e._onInputBlur=function(){var i=t.activeElement;do if(n(i,"pika-single"))return;while(i=i.parentNode);e._c||(e._b=h(function(){e.hide()},50));e._c=!1};e._onClick=function(t){var i=t.target||t.srcElement,u=i;if(i){!s&&n(i,"pika-select")&&(i.onchange||(i.setAttribute("onchange","return;"),r(i,"change",e._onChange)));do if(n(u,"pika-wrapper")||u===o.trigger||n(u,"pika-button"))return;while(u=u.parentNode);e._v&&i!==o.trigger&&u!==o.trigger&&e.hide()}};e.el=t.createElement("div");e.el.className="pika-single"+(o.isRTL?" is-rtl":"")+(o.theme?" "+o.theme:"");r(e.el,"mousedown",e._onMouseDown,!0);r(e.el,"touchend",e._onMouseDown,!0);r(e.el,"change",e._onChange);o.field&&(o.container?o.container.appendChild(e.el):o.bound?t.body.appendChild(e.el):o.field.parentNode.insertBefore(e.el,o.field.nextSibling),r(o.field,"change",e._onInputChange),o.defaultDate||(o.defaultDate=f&&o.field.value?moment(o.field.value,o.format).toDate():new Date(Date.parse(o.field.value)),o.setDefaultDate=!0));c=o.defaultDate;i(c)?o.setDefaultDate?e.setDate(c,!0):e.gotoDate(c):e.gotoDate(new Date);this.hide();r(o.trigger,"click",e._onInputClick);r(o.trigger,"focus",e._onInputFocus);r(o.trigger,"blur",e._onInputBlur)};return d.prototype={options:null,config:function(n){var t,r,u;return this._o||(this._o=e({},b,!0)),this.options=n,t=e(this._o,n,!0),t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme=typeof t.theme=="string"&&t.theme?t.theme:null,t.bound=!!(t.bound!==undefined?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn=typeof t.disableDayFn=="function"?t.disableDayFn:null,r=parseInt(t.numberOfMonths,10)||1,t.numberOfMonths=r>4?4:r,i(t.minDate)||(t.minDate=!1),i(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),l(t.yearRange)?(u=(new Date).getFullYear()-10,t.yearRange[0]=parseInt(t.yearRange[0],10)||u,t.yearRange[1]=parseInt(t.yearRange[1],10)||u):(t.yearRange=Math.abs(parseInt(t.yearRange,10))||b.yearRange,t.yearRange>100&&(t.yearRange=100)),t},toString:function(n){return i(this._d)?f?moment(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return f?moment(this._d):null},setMoment:function(n,t){f&&moment.isMoment(n)&&this.setDate(n.toDate(),t)},getDate:function(){return i(this._d)?new Date(this._d.getTime()):null},setDate:function(n,t){if(!n)return this._d=null,this._o.field&&(this._o.field.value="",v(this._o.field,"change",{firedBy:this})),this.draw();if(typeof n=="string"&&(n=new Date(Date.parse(n))),i(n)){var r=this._o.minDate,u=this._o.maxDate;i(r)&&n<r?n=r:i(u)&&n>u&&(n=u);this._d=new Date(n.getTime());this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),v(this._o.field,"change",{firedBy:this}));t||typeof this._o.onSelect!="function"||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(n){var r=!0;if(i(n)){if(this.calendars){var f=new Date(this.calendars[0].year,this.calendars[0].month,1),t=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),u=n.getTime();t.setMonth(t.getMonth()+1);t.setDate(t.getDate()-1);r=u<f.getTime()||t.getTime()<u}r&&(this.calendars=[{month:n.getMonth(),year:n.getFullYear()}],this._o.mainCalendar==="right"&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=w(this.calendars[0]);for(var n=1;n<this._o.numberOfMonths;n++)this.calendars[n]=w({month:this.calendars[0].month+n,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(n){isNaN(n)||(this.calendars[0].month=parseInt(n,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(n){isNaN(n)||(this.calendars[0].year=parseInt(n,10),this.adjustCalendars())},setMinDate:function(n){a(n);this._o.minDate=n;this._o.minYear=n.getFullYear();this._o.minMonth=n.getMonth();this.draw()},setMaxDate:function(n){a(n);this._o.maxDate=n;this._o.maxYear=n.getFullYear();this._o.maxMonth=n.getMonth();this.draw()},setStartRange:function(n){this._o.startRange=n},setEndRange:function(n){this._o.endRange=n},draw:function(n){var i;if(this._v||n){var t=this._o,f=t.minYear,e=t.maxYear,r=t.minMonth,u=t.maxMonth,o="";for(this._y<=f&&(this._y=f,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=e&&(this._y=e,!isNaN(u)&&this._m>u&&(this._m=u)),i=0;i<t.numberOfMonths;i++)o+='<div class="pika-lendar">'+ot(this,i,this.calendars[i].year,this.calendars[i].month,this.calendars[0].year)+this.render(this.calendars[i].year,this.calendars[i].month)+"<\/div>";if(this.el.innerHTML=o,t.bound&&t.field.type!=="hidden"&&h(function(){t.trigger.focus()},1),typeof this._o.onDraw=="function")this._o.onDraw(this)}},adjustPosition:function(){var n=t.getElementById("pika-wrapper");adjustElementToOtherElement(n,this._o.trigger)},render:function(n,t){var r=this._o,k=new Date,c=p(n,t),u=new Date(n,t,1).getDay(),d=[],h=[],e,y,et;a(k);r.firstDay>0&&(u-=r.firstDay,u<0&&(u+=7));for(var g=t===0?11:t-1,ot=t===11?0:t+1,tt=t===0?n-1:n,ht=t===11?n+1:n,ct=p(tt,g),l=c+u,v=l;v>7;)v-=7;for(l+=7-v,e=0,y=0;e<l;e++){var f=new Date(n,t,1+(e-u)),lt=i(this._d)?o(f,this._d):!1,at=o(f,k),ft=e<u||e>=c+u,s=1+(e-u),w=t,b=n,vt=r.startRange&&o(r.startRange,f),yt=r.endRange&&o(r.endRange,f),pt=r.startRange&&r.endRange&&r.startRange<f&&f<r.endRange,wt=r.minDate&&f<r.minDate||r.maxDate&&f>r.maxDate||r.disableWeekends&&nt(f)||r.disableDayFn&&r.disableDayFn(f);ft&&(e<u?(s=ct+s,w=g,b=tt):(s=s-c,w=ot,b=ht));et={day:s,month:w,year:b,isSelected:lt,isToday:at,isDisabled:wt,isEmpty:ft,isStartRange:vt,isEndRange:yt,isInRange:pt,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};h.push(it(et));++y==7&&(r.showWeekNumber&&h.unshift(rt(e-u,t,n)),d.push(ut(h,r.isRTL)),h=[],y=0)}return st(r,d)},isVisible:function(){return this._v},show:function(){var n,i,u;if(!this._v){if(n=t.getElementsByClassName("pika-single"),n.length>0)for(i=0;i<n.length-1;i++)c(n[i],"is-hidden");u=t.getElementById("pika-wrapper");y(this.el,"is-hidden");y(u,"is-hidden");this._v=!0;this.draw();r(t,"click",this._onClick);this.adjustPosition();typeof this._o.onOpen=="function"&&this._o.onOpen.call(this)}},hide:function(){var i=this._v,n;i!==!1&&(u(t,"click",this._onClick),n=t.getElementById("pika-wrapper"),n.style.position="static",n.style.left="auto",n.style.top="auto",c(n,"is-hidden"),c(this.el,"is-hidden"),this._v=!1,i!==undefined&&typeof this._o.onClose=="function"&&this._o.onClose.call(this))},destroy:function(){this.hide();u(this.el,"mousedown",this._onMouseDown,!0);u(this.el,"touchend",this._onMouseDown,!0);u(this.el,"change",this._onChange);this._o.field&&(u(this._o.field,"change",this._onInputChange),this._o.bound&&(u(this._o.trigger,"click",this._onInputClick),u(this._o.trigger,"focus",this._onInputFocus),u(this._o.trigger,"blur",this._onInputBlur)));this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},d}),fixPikaWrapperPositionInDOM(),typeof Dynamicweb=="undefined")var Dynamicweb={};typeof Dynamicweb.UIControls=="undefined"&&(Dynamicweb.UIControls={});Dynamicweb.UIControls.DatePicker=function(){function t(){function r(){var u=f.value,e,o,r,s;if(u!==""&&typeof u!="undefined"&&(e=parseInt(t.value),o=parseInt(i.value),!isNaN(e)&&!isNaN(o))){r=n.GetDate(u);r===null&&(r=new Date);r.setMinutes(o);r.setHours(e);s=n.dict[u];n.UpdateCalenderDateFields(s,r,u);s.onChangeCallback(u,r)}}function e(n){n.onchange=function(){n.value===""&&(n.value=0);r()}}function o(n,t){var i;n.onkeydown=function(){i=n.value};n.onkeyup=function(){n.value!==i&&t()};n.onpaste=function(){t()}}var s=document.getElementById("pika-wrapper"),u=document.getElementById("pika-wrapper-time"),t=document.getElementById("pika-hour"),i=document.getElementById("pika-minute"),f=document.getElementById("pika-time-currentName");e(t);e(i);o(t,r);o(i,r);window.onclick=function(){pikaAddClass(u,"is-hidden");f.value=""};u.onclick=function(n){n.stopPropagation()}}this.dict={};this.defaultDates={};this.names=[];var n=this;t()};Dynamicweb.UIControls.DatePicker._instance=null;Dynamicweb.UIControls.DatePicker.get_current=function(){return Dynamicweb.UIControls.DatePicker._instance||(Dynamicweb.UIControls.DatePicker._instance=new Dynamicweb.UIControls.DatePicker),Dynamicweb.UIControls.DatePicker._instance};Dynamicweb.UIControls.DatePicker.prototype.initPickaday=function(n,t,i,r,u,f,e,o,s){function v(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].substring(0,1));return i}var h,l=document.getElementById(n+"_datepicker"),a,c;return l.value===""||l.value.toString().toLowerCase().startsWith("@code")?r===""?(h=new Date,isNaN(h)&&(h=new Date(l.value.replace(/-/g,"/")))):h=new Date(r):h=new Date(l.value),h.getFullYear()===2999&&(h=new Date),typeof getMonthNames!="undefined"&&(f=getMonthNames()),typeof getDayNames!="undefined"&&(u=getDayNames()),a=this,c=new Pikaday({field:l,firstDay:1,defaultDate:h,setDefaultDate:o!==!1,minDate:new Date(t,0,1),maxDate:new Date(i,11,31),showWeekNumber:!0,onSelect:function(t){a.UpdateCalenderDateFieldsUsingLabelAsTime(c,t,n);c.hide();c.onChangeCallback(n,t)},yearRange:[t,i],i18n:{previousMonth:'<i class="md md-keyboard-arrow-left pika-prev"><\/i>',nextMonth:'<i class="md md-keyboard-arrow-right pika-next"><\/i>',months:f,weekdays:u,weekdaysShort:v(u)},container:document.getElementById("container"),bound:!1,trigger:document.getElementById(n+"_calendar_btn"),disabled:s===!0}),c.onChangeCallback=e&&typeof e=="function"?e:function(){},this.SetupCalendarHead(c),c};Dynamicweb.UIControls.DatePicker.prototype.IsNotSet=function(n){var t=document.getElementById(n+"_notSet");return t?t.value.toLowerCase()==="true":!1};Dynamicweb.UIControls.DatePicker.prototype.GetDate=function(n){var t,i;return this.IsNotSet(n)?null:(t=document.getElementById(n+"_calendar"),t.value==="")?null:(i=new Date(t.value),t.value===""||t.value.toString().toLowerCase().startsWith("@code")?i=new Date:(i=new Date(t.value),isNaN(i)&&(i=new Date(t.value.replace(/-/g,"/")))),i)};Dynamicweb.UIControls.DatePicker.prototype.SetDate=function(n,t,i){var f,o,u;if(typeof t=="undefined"||t===null){this.ClearDate(n);return}var s=this.dict[n],r=s.getDate(),c=this.IsNotSet(n);(c||r.getFullYear()!==t.getFullYear()||r.getMonth()!==t.getMonth()||r.getDate()!==t.getDate()||r.getHours()!==t.getHours()||r.getMinutes()!==t.getMinutes())&&(f=document.getElementById(n+"_notSet"),f!=null&&(f.value="False"),s.setDate(t,i));var y=document.getElementById("DatePicker_"+n),h=document.getElementById(n+"_calendar"),e="";if(t!==null){var l=t.getMinutes()<9?"0"+t.getMinutes():t.getMinutes(),a=t.getHours()<9?"0"+t.getHours():t.getHours(),v=t.getDate()<9?"0"+t.getDate():t.getDate();e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+v+" "+a+":"+l}o=!1;h.value!=e&&(o=!0);h.value=e;o&&(u=document.getElementById(n+"_label"),u!=null&&u.onchange!=null&&u.onchange())};Dynamicweb.UIControls.DatePicker.prototype.ClearDate=function(n){var t=document.getElementById(n+"_label"),r=document.getElementById(n+"_notSet"),u=this.dict[n],f,i;r&&(typeof u!="undefined"&&u.setDate(new Date),f=r.value!="True",i=null,this.defaultDates[n]!==""&&(i=new Date(this.defaultDates[n])),i&&this.SetDate(n,i),r.value="True",t&&(t.innerHTML=document.getElementById("DWCalendarNotSetString").value,f&&t.onchange&&t.onchange()));u.onChangeCallback()};Dynamicweb.UIControls.DatePicker.prototype.UpdateCalendarDate=function(n,t){if(n.getFullYear()===2999)this.ClearDate(t);else{var i=this.dict[t];this.UpdateCalenderDateFields(i,n,t)}};Dynamicweb.UIControls.DatePicker.prototype.UpdateCalenderDateFieldsUsingLabelAsTime=function(n,t,i){var r=this.GetDate(i);r!==null&&(t.setMinutes(r.getMinutes()),t.setHours(r.getHours()));this.UpdateCalenderDateFields(n,t,i)};Dynamicweb.UIControls.DatePicker.prototype.UpdateCalenderDateFields=function(n,t,i){var u=document.getElementById(i+"_label"),f=n.options.i18n.weekdays[t.getDay()].substring(0,3),e=n.options.i18n.months[t.getMonth()].substring(0,3),a=t.getDate(),o=t.getMinutes()<9?"0"+t.getMinutes():t.getMinutes(),s=t.getHours()<9?"0"+t.getHours():t.getHours(),h=document.getElementById(i+"_calendar_time_btn"),c=h!==null,l=t.getDate()<9?"0"+t.getDate():t.getDate(),r=f+", "+l+" "+e+" "+t.getFullYear();c&&(r=r+" "+s+":"+o);u.innerText=r;this.SetDate(i,t,!0)};Dynamicweb.UIControls.DatePicker.prototype.SetupCalendarHead=function(n){var t=n.getDate(),i=t.getFullYear(),r=n.options.i18n.months[t.getMonth()].substring(0,3),u=n.options.i18n.weekdays[t.getDay()].substring(0,3);document.getElementById("datepicker-year").innerText=i;document.getElementById("datepicker-date").innerText=u+", "+r+" "+t.getDate()};